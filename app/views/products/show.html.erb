<!-- product info -->
<div class="container">
  <div class="product-container bg-light border d-flex align-self-center" >
    <div class="bd-highlight">
      <div id="arouselExampleControls" style="height: 400px; width: 500px; "class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <%= image_tag 'medikit.jpg', size: '500x400', style: 'object-fit: cover;'%>
          </div>
          <div class="carousel-item">
            <%= image_tag 'medikit.jpg', size: '500x400', style: 'object-fit: cover;'%>
          </div>
          <div class="carousel-item">
            <%= image_tag 'medikit.jpg', size: '500x400', style: 'object-fit: cover;'%>
          </div>
        </div>
        <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
    </div>
    <div class="product-show p-3 d-flex flex-column justify-content-between flex-fill">
      <div class="product-header">
        <h1><%= @product.name %></h1>
        <p><em>Some information about the product here</em></p>
      </div>
      <div class="container-boxes">
        <div class="boxes d-flex justify-content-start p-3">
          <div class="box">
            <p><em>Category</em></p>
            <h6><%= @product.category %></h6>
          </div>
          <% @product.certifications.each do |certification| %>
            <div class="box">
              <p><em>Certification</em></p>
              <h6><%= certification.category %></h6>
            </div>
          <% end %>
          <div class="box">
            <p><em>MOQ</em></p>
            <h6><%= @product.minimum_order_quantity %></h6>
          </div>
        </div>
        <div class="boxes d-flex justify-content-start p-3">
          <div class="box">
            <p><em>Price</em></p>
            <h6>$<%= @product.price %>/unit</h6>
          </div>
          <div class="box">
            <p><em>Available</em></p>
            <h6><%= @product.production_quantity %></h6>
          </div>
          <div class="box">
            <p><em>Supplier</em></p>
            <h6><%= @product.supplier.name %></h6>
          </div>
        </div>
      </div>
    </div>
  </div>
  <hr>
  <!-- action buttons -->
  <div class="button-group d-flex">
    <div class="buttons">
      <% if current_user.purchaser? %>
        <button type="button" class="btn btn-supplier" data-toggle="modal" data-target="#exampleModal">
          Message
          <%# <%= icon('far', 'envelope') %>
        </button>
      <% end %>
      <!-- Modal -->
      <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Write</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <%= render 'shared/message_form' %>
              </div>
              <div class="modal-footer">
                <%# <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary">Send</button> %>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <% unless @product.supplier_id == current_user.supplier.id %>
      <div type="button" class="btn btn-supplier">
        <%= link_to "View Supplier", supplier_path(@product.supplier), target: "_blank", rel: "noopener noreffer" %>
      </div>
    <% end %>

    <% if current_user.purchaser? %>
      <div class="buttons">
        <h5><%= link_to "Request quote", new_purchasers_offer_path(product_id: @product.id), class: "btn btn-quote", target: "_blank", rel: "noopener noreferrer" %></h5>
      </div>
    <% end %>

    <% if policy([:suppliers, @product]).edit? %>
      <div><%= link_to "Edit product", edit_suppliers_product_path(@product), class: "btn btn-supplier" %></div>
    <% end %>

    <% if policy([:suppliers, @product]).destroy? %>
      <div><%= link_to "Destroy product", suppliers_product_path(@product.id), class: "btn btn-danger", method: :delete, data: {confirm: 'Are you sure?'} %></div>
    <% end %>
    
  </div>
</div>
<%# <p>For Christine:^)</p> %>
<%# certification information %>
<%# <% @product.certifications.each do |certification| %>
  <%# <p>Number: <%= certification.number</p> %>
  <%# <p>Category: <%= certification.category</p> %>
  <%# <p>Code: <%= certification.code</p> %>
  <%# <p>Authority: <%= certification.authority</p> %>
  <%# <% end %>